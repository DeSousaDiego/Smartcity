{"openapi":"3.0.0","info":{"title":"api","version":"1.0.0"},"paths":{"/reviews/{id}":{"get":{"tags":["Reviews"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The review id"}],"responses":{"200":{"$ref":"#/components/responses/ReviewFound"},"404":{"description":"The review was not found"},"500":{"description":"Some server error"}}},"patch":{"tags":["Reviews"],"parameters":[{"name":"id","in":"path","description":"ID of the review to update","required":true,"schema":{"type":"integer"}}],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/ReviewAUpdate"},"responses":{"204":{"$ref":"#/components/responses/ReviewUpdated"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"404":{"description":"Review not found"},"500":{"description":"Internal error"}}},"delete":{"tags":["Reviews"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The review id"}],"responses":{"204":{"$ref":"#/components/responses/ReviewDeleted"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"404":{"description":"The review was not found"},"500":{"description":"Some error happened"}}}},"/reviews":{"get":{"tags":["Reviews"],"security":[{"bearerAuth":[]}],"responses":{"200":{"$ref":"#/components/responses/allReviewsFound"},"500":{"description":"Some server error"}}},"post":{"tags":["Reviews"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/ReviewAAjoute"},"responses":{"201":{"$ref":"#/components/responses/ReviewAjoute"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"500":{"description":"Internal error"}}}}},"components":{"schemas":{"Review":{"type":"object","properties":{"id":{"type":"integer","description":"The auto-generated id of the review"},"title":{"type":"string","description":"The title of the review"},"content":{"type":"string","description":"The content of the review"},"rating":{"type":"integer","description":"The rating of the review"},"user_id":{"type":"integer","description":"The id of the user who posted the review"},"book_id":{"type":"integer","description":"The id of the book reviewed"}}},"ReviewInput":{"type":"object","properties":{"title":{"type":"string"},"content":{"type":"string"},"rating":{"type":"integer"},"user_id":{"type":"integer"},"book_id":{"type":"integer"}}}},"responses":{"allReviewsFound":{"description":"renvoie toutes les reviews","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Review"}}}}},"ReviewFound":{"description":"renvoie une review","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Review"}}}},"ReviewAjoute":{"description":"le review a été ajouté"},"ReviewUpdated":{"description":"review updated"},"ReviewDeleted":{"description":"le review a été supprimé"},"mustBeAdmin":{"description":"Access denied to all non-admin users"},"ErrorJWT":{"description":"le JWT n'est pas valide"},"MissingJWT":{"description":"le JWT n'est pas présent"}},"requestBodies":{"ReviewAAjoute":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewInput"}}}},"ReviewAUpdate":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewInput"}}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"tags":[]}