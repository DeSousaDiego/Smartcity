{"openapi":"3.0.0","info":{"title":"api","version":"1.0.0"},"paths":{"/book":{"get":{"tags":["Book"],"security":[{"bearerAuth":[]}],"responses":{"200":{"$ref":"#/components/responses/BooksFound"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"404":{"description":"Aucun livre trouvé"},"500":{"description":"Erreur serveur"}}},"post":{"tags":["Book"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/BookToUpdate"},"responses":{"201":{"$ref":"#/components/responses/BookAdded"},"204":{"$ref":"#/components/responses/BookUpdated"},"400":{"description":"- Fichier image non valide\n- ISBN manquant\n- Formulaire non valide\n- Le JWT n'est pas valide\n"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"500":{"description":"Erreur serveur"}}},"delete":{"tags":["Book"],"security":[{"bearerAuth":[]}],"responses":{"204":{"$ref":"#/components/responses/BookDeleted"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"500":{"description":"Erreur serveur"}}}},"/book/{id}":{"get":{"tags":["Book"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"id","description":"ISBN d'un livre","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"$ref":"#/components/responses/BookFound"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"404":{"description":"Livre non trouvé"},"500":{"description":"Erreur serveur"}}}},"/reviews/{id}":{"get":{"tags":["Reviews"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The review id"}],"responses":{"200":{"$ref":"#/components/responses/ReviewFound"},"404":{"description":"The review was not found"},"500":{"description":"Some server error"}}},"patch":{"tags":["Reviews"],"parameters":[{"name":"id","in":"path","description":"ID of the review to update","required":true,"schema":{"type":"integer"}}],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/ReviewAUpdate"},"responses":{"204":{"$ref":"#/components/responses/ReviewUpdated"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"404":{"description":"Review not found"},"500":{"description":"Internal error"}}},"delete":{"tags":["Reviews"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The review id"}],"responses":{"204":{"$ref":"#/components/responses/ReviewDeleted"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"404":{"description":"The review was not found"},"500":{"description":"Some error happened"}}}},"/reviews":{"get":{"tags":["Reviews"],"security":[{"bearerAuth":[]}],"responses":{"200":{"$ref":"#/components/responses/allReviewsFound"},"500":{"description":"Some server error"}}},"post":{"tags":["Reviews"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/ReviewAAjoute"},"responses":{"201":{"$ref":"#/components/responses/ReviewAjoute"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"500":{"description":"Internal error"}}}}},"components":{"schemas":{"Book":{"type":"object","properties":{"isbn":{"type":"string","description":"ISBN du livre."},"title":{"type":"string","description":"Titre du livre."},"author":{"type":"string","description":"Auteur du livre."},"illustrator":{"type":"string","description":"Illustrateur du livre."},"description":{"type":"string","description":"Description du livre."},"genre":{"type":"string","description":"Genre du livre."},"released_year":{"type":"integer","format":"int32","description":"Année de publication du livre."},"country":{"type":"string","description":"Pays où le livre a été initialement publié."},"publishing_house":{"type":"string","description":"Éditeur du livre."},"img_path":{"type":"string","description":"Chemin vers l'image du livre."},"rating":{"type":"number","format":"float","description":"Note moyenne du livre."},"nb_ratings":{"type":"integer","format":"int32","description":"Nombre de notations du livre."}}},"BooksList":{"type":"array","items":{"$ref":"#/components/schemas/Book"}},"BookInput":{"type":"object","properties":{"isbn":{"type":"string","description":"ISBN du livre."},"title":{"type":"string","description":"Titre du livre."},"description":{"type":"string","description":"Description du livre."},"country":{"type":"string","description":"Pays d'origine du livre."},"genre":{"type":"string","description":"Genre du livre."},"released_year":{"type":"integer","format":"int32","description":"Année de publication du livre."},"pages":{"type":"integer","format":"int32","description":"Nombre de pages du livre."},"publishing_house":{"type":"string","description":"Maison d'édition du livre."},"illustrator":{"type":"string","description":"Illustrateur du livre (peut être vide)."},"author":{"type":"string","description":"Auteur du livre (peut être vide)."},"image":{"type":"string","format":"binary","description":"Fichier image du livre (utiliser le format `multipart/form-data` lors de l'envoi de la requête)."}}},"Review":{"type":"object","properties":{"id":{"type":"integer","description":"The auto-generated id of the review"},"title":{"type":"string","description":"The title of the review"},"content":{"type":"string","description":"The content of the review"},"rating":{"type":"integer","description":"The rating of the review"},"user_id":{"type":"integer","description":"The id of the user who posted the review"},"book_id":{"type":"integer","description":"The id of the book reviewed"}}},"ReviewInput":{"type":"object","properties":{"title":{"type":"string"},"content":{"type":"string"},"rating":{"type":"integer"},"user_id":{"type":"integer"},"book_id":{"type":"integer"}}}},"responses":{"BookFound":{"description":"renvoie un livre","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Book"}}}},"BooksFound":{"description":"renvoie une liste contenant tous les livres","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BooksList"}}}},"BookAdded":{"description":"le livre a été ajouté"},"BookUpdated":{"description":"le livre a été modifié"},"BookDeleted":{"description":"Le livre a été supprimé"},"allReviewsFound":{"description":"renvoie toutes les reviews","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Review"}}}}},"ReviewFound":{"description":"renvoie une review","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Review"}}}},"ReviewAjoute":{"description":"le review a été ajouté"},"ReviewUpdated":{"description":"review updated"},"ReviewDeleted":{"description":"le review a été supprimé"},"mustBeAdmin":{"description":"Access denied to all non-admin users"},"ErrorJWT":{"description":"le JWT n'est pas valide"},"MissingJWT":{"description":"le JWT n'est pas présent"}},"requestBodies":{"BookToAdd":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookInput"}}}},"BookToUpdate":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookInput"}}}},"ReviewAAjoute":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewInput"}}}},"ReviewAUpdate":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewInput"}}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"tags":[]}